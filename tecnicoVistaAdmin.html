<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Técnicos - Admin</title>
    <!--Enlace a tipografía externa-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <!--Enlaces a CSS y Framework Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styleVistaAdmin.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.2/dist/sweetalert2.min.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body>

    <!-- EL NAVBAR SE INYECTA AUTOMÁTICAMENTE AQUÍ -->

    <div class="container-fluid p-0 header-container mt-5 pt-5"> 
        <div class="row align-items-center m-0 header d-flex justify-content-between pb-3"> 
            
            <div class="col-auto d-flex align-items-center">
                
                <div class="header-icon ms-3">
                    <svg width="37" height="37" viewBox="0 0 46 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.8221 19.8351C25.0746 19.8351 29.3326 15.5771 29.3326 10.3245C29.3326 5.07198 25.0746 0.813965 19.8221 0.813965C14.5695 0.813965 10.3115 5.07198 10.3115 10.3245C10.3115 15.5771 14.5695 19.8351 19.8221 19.8351Z" fill="white"/>
                        <path d="M25.917 37.2222H36.2225V39.2833H25.917V37.2222Z" fill="white"/>
                        <path d="M17.0835 40.1665V44.5832C17.0835 44.9736 17.2386 45.3481 17.5147 45.6242C17.7908 45.9003 18.1653 46.0554 18.5557 46.0554H43.5835C43.974 46.0554 44.3484 45.9003 44.6245 45.6242C44.9006 45.3481 45.0557 44.9736 45.0557 44.5832V29.861C45.0557 29.4705 44.9006 29.096 44.6245 28.8199C44.3484 28.5439 43.974 28.3887 43.5835 28.3887H33.278V26.2246C33.278 25.8341 33.1229 25.4597 32.8468 25.1836C32.5707 24.9075 32.1962 24.7524 31.8057 24.7524C31.4153 24.7524 31.0408 24.9075 30.7647 25.1836C30.4886 25.4597 30.3335 25.8341 30.3335 26.2246V28.3887H27.3891V23.1182C24.8874 22.7088 22.3568 22.502 19.8219 22.4999C14.2315 22.4761 8.70385 23.6771 3.62741 26.0185C2.7919 26.4128 2.08703 27.0384 1.59644 27.8213C1.10585 28.6042 0.850135 29.5113 0.85963 30.4351V40.1665H17.0835ZM42.1113 43.111H20.028V31.3332H30.3335V31.9515C30.3335 32.342 30.4886 32.7164 30.7647 32.9925C31.0408 33.2686 31.4153 33.4237 31.8057 33.4237C32.1962 33.4237 32.5707 33.2686 32.8468 32.9925C33.1229 32.7164 33.278 32.342 33.278 31.9515V31.3332H42.1113V43.111Z" fill="white"/>
                    </svg>
                </div>
                
                <div class="header-title ms-3">
                    <h5 class="mb-0">Todos los Técnicos</h5>
                </div>
                
            </div>
            
            <div class="col-auto me-3">
                <button class="btn btn-add-user d-flex align-items-center justify-content-center">
                    <i class="bi bi-plus-lg me-2"></i> Agregar técnico
                </button>
            </div>
            
        </div>
    </div>

    

   <div class="container mt-5">
    <div id="filter-bar-container" class="mb-4">
        <div class="filter-bar-custom">
            <div class="row align-items-center top-bar">

                <div class="col-lg-2 col-md-4 mb-3 mb-lg-0">
                    <div class="user-counts ms-5">
                        <div class="techCount">
                            <span id="userCount">0</span> Técnicos
                        </div>
                        <small>Basado en <span id="filterCount">0</span> Filtro(s)</small>
                    </div>
                </div>

                <div class="col-lg-10 col-md-8 pb-0 pt-3">
                    <div class="input-group search-container">
                        <span class="input-group-text search-icon-span">
                            <i class="bi bi-search"></i>
                        </span>
                        <input type="text" id="busquedaUsuario" class="form-control search-input" placeholder="Buscar Usuario / Email / ID">
                        <button class="btn btn-outline-danger d-none" id="btnBuscar"></button>
                    </div>
                </div>

                

            </div>

            <hr class="filter-divider">

            <div class="d-flex flex-wrap gap-3 filter-row">
                <div class="filter-select-wrapper">
                    <select id="periodFilter" class="form-select styled-select">
                        <i class="bi bi-calendar-event filter-icon"></i>
                        <option value="all">Todo el tiempo</option>
                        <option value="today">Hoy</option>
                        <option value="week">Esta semana</option>
                        <option value="month">Este mes</option>
                    </select>
                </div>
                

                <div class="filter-select-wrapper">
                    <select id="statusFilter" class="form-select styled-select">
                        <i class="bi bi-list-check filter-icon"></i>
                        <option value="all">Todas las categorías</option>
                        </select>
                </div>

                <div class="d-flex align-items-center filter-select-quantity">
                    <label for="ticketsPerPage" class="form-label me-2 ">Filtrar por cantidad:</label>
                    <select id="ticketsPerPage" class="form-select" style="width: auto;">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </div>

            </div>
        </div>
        </div>
    
    <div id="lista-usuarios"></div>

    </div>

        <div class="d-flex justify-content-center mt-4 mb-4">
            <ul class="pagination" id="paginationControls">
                <li class="page-item" id="prevPage">
                    <a class="page-link" href="#" aria-label="Anterior">
                        <i class="bi bi-chevron-left"></i>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" id="currentPage">
                        2
                    </a>
                </li>
                <li class="page-item" id="nextPage">
                    <a class="page-link" href="#" aria-label="Siguiente">
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <!-- Modal Tecnico -->
    <div class="modal fade" id="modalAgregarTecnico" tabindex="-1" aria-labelledby="modalAgregarTecnicoLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalAgregarTecnicoLabel">Agregar Nuevo Técnico</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <form id="userForm">
            <div class="modal-body">
                <form id="formNuevoTecnico">
                    <input type="hidden" id="userId">
                    <div class="mb-3">
                        <label for="nombreCompleto" class="form-label fw-semibold">Nombre Completo</label>
                        <input type="text" class="form-control" id="nombreCompleto" required>
                    </div>
                    <div class="mb-3">
                        <label for="nombreUsuario" class="form-label fw-semibold">Usuario</label>
                        <input type="text" class="form-control" id="nombreUsuario" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label fw-semibold">Email</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="mb-3">
                        <label for="telefono" class="form-label fw-semibold">Teléfono</label>
                        <input type="tel" class="form-control" id="telefono" required>
                    </div>
                    <div class="mb-3">
                        <label for="categoria" class="form-label fw-semibold">Categoría Principal</label>
                        <select class="form-select" id="categoria" required>
                        </select>
                    </div>
                    <div class="d-grid mt-4">
                        <button type="submit" id="btnGuardarTecnico" class="btn btnConfirm">Guardar Técnico</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalVerActividad" tabindex="-1" aria-labelledby="modalVerActividadLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header headerModal text-white">
        <h5 class="modal-title" id="modalVerActividadLabel"><i class="bi bi-info-circle me-2"></i>Detalles del Técnico</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group list-group-flush">
            <li class="list-group-item d-none" style="padding: 0; border: none;"> 
                <span id="lblUserId" style="display: none;"></span>
            </li>
            
          <li class="list-group-item">
            <strong>Nombre:</strong> <span id="lblNombre"></span>
          </li>
          <li class="list-group-item">
            <strong>Email:</strong> <span id="lblEmail"></span>
          </li>
          <li class="list-group-item">
            <strong>Usuario:</strong> <span id="lblUsuario"></span>
          </li>
          <li class="list-group-item">
            <strong>Teléfono:</strong> <span id="lblTelefono"></span>
          </li>
          <li class="list-group-item">
            <strong>Categoría:</strong> <span id="lblCategoria"></span>
          </li>
          <li class="list-group-item">
            <strong>Fecha de Registro:</strong> <span id="lblFechaRegistro"></span>
          </li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
    

<!--Enlace a JS Bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous">
        </script>

    <script type="module" src="js/controllers/tecnicoVistaAdminController.js"></script>
    <script type="module" src="js/navbarLoader.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.2/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.19/build/js/utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.19/build/js/intlTelInput.min.js"></script>
    <!-- script mascara, libreria IMask-->
    <script src="https://unpkg.com/imask@6.0.7/dist/imask.js"></script>
    
</body>

</html>