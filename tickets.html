<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tickets</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!--     <link rel="stylesheet" href="css/navbar.css"> -->
    <link rel="stylesheet" href="css/styleTickets.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.2/dist/sweetalert2.min.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>

<body>
    <!-- EL NAVBAR SE INYECTA AUTOMÁTICAMENTE AQUÍ -->

    <div class="container-fluid p-0 header-container">
        <div class="row align-items-center m-0 header">
            <div class="col-auto header-icon">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path opacity="0.16"
                        d="M38 10H20V38H38C39.0609 38 40.0783 37.5786 40.8284 36.8284C41.5786 36.0783 42 35.0609 42 34V28C40.9391 28 39.9217 27.5786 39.1716 26.8284C38.4214 26.0783 38 25.0609 38 24C38 22.9391 38.4214 21.9217 39.1716 21.1716C39.9217 20.4214 40.9391 20 42 20V14C42 12.9391 41.5786 11.9217 40.8284 11.1716C40.0783 10.4214 39.0609 10 38 10Z"
                        fill="black" />
                    <path
                        d="M6 20H4C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22V20ZM6 28V26C5.46957 26 4.96086 26.2107 4.58579 26.5858C4.21071 26.9609 4 27.4696 4 28H6ZM42 20V22C42.5304 22 43.0391 21.7893 43.4142 21.4142C43.7893 21.0391 44 20.5304 44 20H42ZM42 28H44C44 27.4696 43.7893 26.9609 43.4142 26.5858C43.0391 26.2107 42.5304 26 42 26V28ZM10 12H20V8H10V12ZM20 12H38V8H20V12ZM38 36H20V40H38V36ZM20 36H10V40H20V36ZM18 10V38H22V10H18ZM7.414 22.586C7.78894 22.9611 7.99957 23.4697 7.99957 24C7.99957 24.5303 7.78894 25.0389 7.414 25.414L10.242 28.242C11.3668 27.1168 11.9987 25.591 11.9987 24C11.9987 22.409 11.3668 20.8832 10.242 19.758L7.414 22.586ZM40.586 25.414C40.2111 25.0389 40.0004 24.5303 40.0004 24C40.0004 23.4697 40.2111 22.9611 40.586 22.586L37.758 19.758C36.6332 20.8832 36.0013 22.409 36.0013 24C36.0013 25.591 36.6332 27.1168 37.758 28.242L40.586 25.414ZM6 22C6.514 22 7.024 22.194 7.414 22.586L10.242 19.758C9.11704 18.6327 7.59117 18.0003 6 18V22ZM8 20V14H4V20H8ZM8 34V28H4V34H8ZM7.414 25.414C7.03901 25.7891 6.53039 25.9999 6 26V30C7.532 30 9.072 29.414 10.242 28.242L7.414 25.414ZM40.586 22.586C40.961 22.2109 41.4696 22.0001 42 22V18C40.468 18 38.928 18.586 37.758 19.758L40.586 22.586ZM40 14V20H44V14H40ZM40 28V34H44V28H40ZM42 26C41.4696 25.9999 40.961 25.7891 40.586 25.414L37.758 28.242C38.883 29.3673 40.4088 29.9997 42 30V26ZM10 36C9.46957 36 8.96086 35.7893 8.58579 35.4142C8.21071 35.0391 8 34.5304 8 34H4C4 35.5913 4.63214 37.1174 5.75736 38.2426C6.88258 39.3679 8.4087 40 10 40V36ZM38 40C39.5913 40 41.1174 39.3679 42.2426 38.2426C43.3679 37.1174 44 35.5913 44 34H40C40 34.5304 39.7893 35.0391 39.4142 35.4142C39.0391 35.7893 38.5304 36 38 36V40ZM38 12C38.5304 12 39.0391 12.2107 39.4142 12.5858C39.7893 12.9609 40 13.4696 40 14H44C44 12.4087 43.3679 10.8826 42.2426 9.75736C41.1174 8.63214 39.5913 8 38 8V12ZM10 8C8.4087 8 6.88258 8.63214 5.75736 9.75736C4.63214 10.8826 4 12.4087 4 14H8C8 13.4696 8.21071 12.9609 8.58579 12.5858C8.96086 12.2107 9.46957 12 10 12V8Z"
                        fill="black" />
                </svg>

            </div>
            <div class="col header-title">
                <h4 class="mb-0">Todos los tickets</h4>

                <div class="d-flex align-items-center">
                    <label for="ticketsPerPage" class="form-label me-2 ">Filtrar por cantidad:</label>
                    <select id="ticketsPerPage" class="form-select" style="width: auto;">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </div>

            </div>

        </div>
    </div>

    <div class="container ticket-container">
        <div class="row">
            <div class="col-md-4">
                <div class="status-header d-flex flex-row align-items-center mb-3" id="estado-en-espera">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3 12C3 13.1819 3.23279 14.3522 3.68508 15.4442C4.13738 16.5361 4.80031 17.5282 5.63604 18.364C6.47177 19.1997 7.46392 19.8626 8.55585 20.3149C9.64778 20.7672 10.8181 21 12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 9.61305 20.0518 7.32387 18.364 5.63604C16.6761 3.94821 14.3869 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12Z"
                            stroke="#DC2F02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 7V12L15 15" stroke="#DC2F02" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <p class="mb-0 ms-1" style="font-weight: 550;">Esperando Respuesta <span
                            id="en-espera-header-count"></span></p>
                </div>
                <div id="en-espera-list"></div>
            </div>
            <div class="col-md-4">
                <div class="status-header d-flex flex-row align-items-center mb-3" id="estado-en-progreso">
                    <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M5.625 3.375C5.02826 3.375 4.45597 3.61205 4.03401 4.03401C3.61205 4.45597 3.375 5.02826 3.375 5.625V21.375C3.375 21.9717 3.61205 22.544 4.03401 22.966C14.3879 22.544 14.625 21.9717 14.625 21.375V14.625H21.375C21.9717 14.625 22.544 14.3879 22.966 13.966C23.3879 13.544 23.625 12.9717 23.625 12.375V5.625C23.625 5.02826 23.3879 4.45597 22.966 4.03401C22.544 3.61205 21.9717 3.375 21.375 3.375H5.625ZM14.625 12.375H21.375V5.625H14.625V12.375ZM5.625 14.625V21.375H12.375V14.625H5.625ZM5.625 12.375H12.375V5.625H5.625V12.375Z"
                            fill="#F48C06" />
                    </svg>
                    <p class="mb-0 ms-1" style="font-weight: 550;">En progreso <span
                            id="en-progreso-header-count"></span></p>
                </div>
                <div id="en-progreso-list"></div>
            </div>
            <div class="col-md-4">
                <div class="status-header d-flex flex-row align-items-center mb-3" id="estado-completado">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10.243 16.3139L6 12.0699L7.414 10.6559L10.243 13.4839L15.899 7.8269L17.314 9.2419L10.243 16.3139Z"
                            fill="#32C91E" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M1 12C1 5.925 5.925 1 12 1C18.075 1 23 5.925 23 12C23 18.075 18.075 23 12 23C5.925 23 1 18.075 1 12ZM12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 10.8181 3.23279 9.64778 3.68508 8.55585C4.13738 7.46392 4.80031 6.47177 5.63604 5.63604C6.47177 4.80031 7.46392 4.13738 8.55585 3.68508C9.64778 3.23279 10.8181 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12C21 14.3869 20.0518 16.6761 18.364 18.364C16.6761 20.0518 14.3869 21 12 21Z"
                            fill="#32C91E" />
                    </svg>
                    <p class="mb-0 ms-1" style="font-weight: 550;">Completado <span id="completado-header-count"></span>
                    </p>
                </div>
                <div id="completado-list"></div>
            </div>
        </div>

        <div class="d-flex justify-content-center">
            <ul class="pagination" id="paginationControls">
                <li class="page-item" id="prevPage">
                    <a class="page-link" href="#" aria-label="Anterior">
                        <i class="bi bi-chevron-left"></i>
                    </a>
                </li>
                <li class="page-item" id="currentPage">
                    <a class="page-link" href="#">1</a>
                </li>
                <li class="page-item" id="nextPage">
                    <a class="page-link" href="#" aria-label="Siguiente">
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!--MODAL VER DATOS-->
    <div class="modal fade" id="viewTicketModal" tabindex="-1" aria-labelledby="viewTicketModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewTicketModalLabel">Detalles del Ticket <span id="modalTicketIdDisplay" class="text-muted">#0000</span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="modalTicketId">

                    <div class="mb-4">
                        <label for="modalTicketTitle" class="form-label text-muted mb-0">Título</label>
                        <input type="text" class="form-control" id="modalTicketTitle" readonly>
                        <p class="h4 fw-bold" id="modalTicketTitle"></p>
                    </div>

                    <div class="row mb-3"> 
                        <div class="col-md-6 mb-3 mb-md-0">
                            <label for="modalTicketCategory" class="form-label fw-semibold">Categoría</label>
                            <input type="text" class="form-control" id="modalTicketCategory" readonly>
                        </div>

                        <div class="col-md-6">
                            <label for="modalTicketPriority" class="form-label fw-semibold">Prioridad</label>
                            <input type="text" class="form-control" id="modalTicketPriority" readonly>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="modalTicketTechnician" class="form-label fw-semibold">Técnico Asignado</label>
                        <input type="text" class="form-control" id="modalTicketTechnician" readonly>
                    </div>

                    <div class="mb-3">
                        <label for="modalTicketDescription" class="form-label fw-semibold">Descripción</label>
                        <textarea class="form-control" id="modalTicketDescription" rows="3" readonly></textarea>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.js"></script>
    <!-- Incluye SweetAlert2 desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Navbar -->
    <script type="module" src="js/navbarLoader.js"></script>
    <script type="module" src="js/controllers/ticketController.js"></script>
</body>

</html>